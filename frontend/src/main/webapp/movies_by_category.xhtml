<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
    <title>Movies by Category</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/primefaces/12.0.0/themes/saga-blue/theme.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/primefaces/12.0.0/primefaces.min.css" />
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <f:metadata>
<!--        <f:viewParam name="id" value="#{param.id}" converter="javax.faces.Integer" />-->
        <f:event type="preRenderView" listener="#{categoryBean.getMoviesByCategoryId(param.id)}" />
    </f:metadata>
</h:head>

<h:body>
    <ui:include src="header.xhtml" />
    <div class="container my-5">
        <h1 class="text-center">Movies by Category</h1>
        <div class="row">
            <ui:repeat value="#{categoryBean.moviesByCategory}" var="movie">
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <img class="card-img-top" src="/images/photos/#{movie.pic}" alt="#{movie.title}" />
                        <div class="card-body">
                            <h5 class="card-title">#{movie.title}</h5>
                            <p class="card-text">#{movie.description}</p>
                            <p class="card-text">Rating: #{movie.rating}</p>
                            <!-- Add more movie details if needed -->
                        </div>
                    </div>
                </div>
            </ui:repeat>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/primefaces/12.0.0/primefaces.min.js"></script>
</h:body>

</html>
